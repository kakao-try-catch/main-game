# [Test] 멀티플레이어 통합 테스트

## 📋 기본 정보

- **Labels**: `testing`, `qa`
- **Priority**: Medium
- **Estimated Time**: 4-5 hours
- **Dependencies**: Issue #1 ~ #6 (All)

---

## 📝 설명

지뢰찾기 멀티플레이어 기능의 통합 테스트를 수행합니다.
모든 이슈가 완료된 후 실제 멀티플레이 환경에서 테스트합니다.

---

## ✅ 테스트 시나리오

### 1. 기본 동작 테스트

#### 1.1 타일 열기 동기화

- [ ] Player1이 타일을 열면 Player2 화면에도 열림
- [ ] 열린 타일에 Player1의 색상이 표시됨
- [ ] 지뢰가 아닌 타일 열기 시 점수가 증가함

#### 1.2 깃발 토글 동기화

- [ ] Player1이 깃발을 설치하면 Player2 화면에도 표시됨
- [ ] 깃발에 Player1의 색상이 표시됨
- [ ] Player2가 Player1의 깃발을 제거할 수 없음
- [ ] 남은 지뢰 수가 정확히 업데이트됨

#### 1.3 점수 업데이트 동기화

- [ ] 타일 열기 시 점수판이 실시간 업데이트됨
- [ ] 지뢰 밟기 시 점수가 감소함
- [ ] 여러 타일 동시 열기(Flood Fill) 시 점수 제한이 적용됨

### 2. Race Condition 테스트

#### 2.1 동시 타일 열기

- [ ] 두 플레이어가 동시에 같은 타일을 클릭
- [ ] 한 명만 점수를 받음
- [ ] 두 화면에 동일한 결과가 표시됨

#### 2.2 동시 깃발 설치

- [ ] 두 플레이어가 동시에 같은 위치에 깃발 설치 시도
- [ ] 먼저 도착한 요청만 처리됨

### 3. 게임 흐름 테스트

#### 3.1 게임 시작 → 진행 → 승리

```
1. 로비에서 지뢰찾기 선택
2. 설정 확인 (Medium, Normal, 3분)
3. 게임 시작
4. 모든 안전한 타일 열기
5. 최종 정산 확인
6. 결과 화면 표시
```

#### 3.2 게임 시작 → 진행 → 시간 초과

```
1. 제한 시간 2분으로 설정
2. 게임 시작
3. 몇 개 타일만 열고 대기
4. 시간 초과
5. 최종 정산 및 결과 확인
```

#### 3.3 게임 재시작 (리플레이)

```
1. 첫 번째 게임 완료
2. 리플레이 버튼 클릭
3. 새 게임 시작 확인
4. 이전 게임 상태가 초기화되었는지 확인
```

### 4. 엣지 케이스 테스트

#### 4.1 게임 중 플레이어 접속 종료

- [ ] 한 플레이어가 브라우저를 닫음
- [ ] 다른 플레이어는 게임 계속 가능
- [ ] 끊긴 플레이어의 타일/깃발 색상 유지

#### 4.2 게임 중 플레이어 재접속

- [ ] 끊긴 플레이어가 같은 방에 재접속
- [ ] 현재 게임 상태가 동기화됨
- [ ] 점수가 이어짐 (또는 새로 시작되는 정책에 따라)

#### 4.3 4인 최대 인원 테스트

- [ ] 4명 동시 접속
- [ ] 모든 플레이어의 행동이 동기화됨
- [ ] 4가지 색상이 올바르게 표시됨
- [ ] 5번째 플레이어 접속 시 거부됨

### 5. 설정 테스트

#### 5.1 맵 크기 프리셋

- [ ] Small (30x18) 테스트
- [ ] Medium (45x27) 테스트
- [ ] Large (50x30) 테스트
- [ ] 각 크기에서 스크롤/줌이 정상 동작

#### 5.2 난이도 프리셋

- [ ] Easy (10%) - 지뢰 밀도 확인
- [ ] Normal (20%) - 지뢰 밀도 확인
- [ ] Hard (30%) - 지뢰 밀도 확인

#### 5.3 시간 제한

- [ ] 2분 제한 테스트
- [ ] 3분 제한 테스트
- [ ] 4분 제한 테스트

---

## 🐛 버그 리포트 템플릿

발견된 버그는 다음 형식으로 기록:

```markdown
### 버그 제목

**재현 단계:**

1.
2.
3.

**예상 동작:**

**실제 동작:**

**스크린샷/로그:**

**환경:**

- OS:
- 브라우저:
- 플레이어 수:
```

---

## 📋 테스트 결과 체크리스트

| 카테고리       | 테스트 항목        | Pass/Fail | 비고 |
| -------------- | ------------------ | --------- | ---- |
| 기본 동작      | 타일 열기 동기화   |           |      |
| 기본 동작      | 깃발 토글 동기화   |           |      |
| 기본 동작      | 점수 업데이트      |           |      |
| Race Condition | 동시 타일 열기     |           |      |
| Race Condition | 동시 깃발 설치     |           |      |
| 게임 흐름      | 승리 시나리오      |           |      |
| 게임 흐름      | 시간 초과 시나리오 |           |      |
| 게임 흐름      | 리플레이           |           |      |
| 엣지 케이스    | 접속 종료          |           |      |
| 엣지 케이스    | 재접속             |           |      |
| 엣지 케이스    | 4인 플레이         |           |      |
| 설정           | 각 맵 크기         |           |      |
| 설정           | 각 난이도          |           |      |
| 설정           | 각 시간 제한       |           |      |

---

## 📋 Acceptance Criteria

- [ ] 모든 테스트 시나리오 통과 (또는 버그 이슈 생성)
- [ ] 심각한 버그 없음 (게임 불가능 상태)
- [ ] 동기화 관련 이슈 없음

---

## 🔗 관련 이슈

- **선행**: Issue #1 ~ #6 (모든 구현 이슈)
- **후속**: 발견된 버그별 이슈 생성
